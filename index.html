<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="A comprehensive guide for technical interview preparation"
    />
    <meta name="theme-color" content="#e53935" />
    <title>Interview Guide</title>

    <!-- PWA Support -->
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.svg" />

    <!-- Prism.js for syntax highlighting -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-coy.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css"
      rel="stylesheet"
    />

    <!-- Marked.js for markdown parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>

    <!-- PDF Export Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Custom styles -->
    <style>
      :root {
        --primary-color: #e53935;
        --primary-light: #ff6659;
        --primary-dark: #ab000d;
        --secondary-color: #1976d2;
        --secondary-light: #63a4ff;
        --secondary-dark: #004ba0;
        --accent-color: #ff9800;
        --background-color: #f8fafc;
        --background-gradient: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 100%
        );
        --surface-color: #ffffff;
        --surface-elevated: #ffffff;
        --text-primary: #1a202c;
        --text-secondary: #4a5568;
        --text-muted: #718096;
        --border-color: #e2e8f0;
        --border-light: #f1f5f9;
        --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06);
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
        --shadow-hover: 0 4px 8px rgba(0, 0, 0, 0.15);
        --border-radius: 12px;
        --border-radius-sm: 8px;
        --border-radius-lg: 16px;
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        --transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* Dark theme variables */
      body.dark-theme {
        --background-color: #0f172a;
        --surface-color: #1e293b;
        --surface-elevated: #334155;
        --text-primary: #f1f5f9;
        --text-secondary: #cbd5e1;
        --text-muted: #94a3b8;
        --border-color: #334155;
        --border-light: #475569;
        --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.3),
          0 1px 2px 0 rgba(0, 0, 0, 0.2);
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3),
          0 2px 4px -1px rgba(0, 0, 0, 0.2);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3),
          0 4px 6px -2px rgba(0, 0, 0, 0.2);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.4),
          0 10px 10px -5px rgba(0, 0, 0, 0.3);
        --background-gradient: linear-gradient(
          135deg,
          #1e293b 0%,
          #334155 100%
        );
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
        background: var(--background-color);
        background-image: radial-gradient(
            circle at 25px 25px,
            rgba(255, 255, 255, 0.2) 2%,
            transparent 0%
          ),
          radial-gradient(
            circle at 75px 75px,
            rgba(255, 255, 255, 0.1) 2%,
            transparent 0%
          );
        background-size: 100px 100px;
        color: var(--text-primary);
        line-height: 1.6;
        min-height: 100vh;
      }

      .container {
        display: grid;
        grid-template-columns: 300px 1fr;
        min-height: 100vh;
        max-width: 1400px;
        margin: 0 auto;
        background-color: var(--surface-color);
        box-shadow: var(--shadow);
      }

      /* Sidebar Navigation */
      .sidebar {
        width: 100%;
        background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
        -webkit-backdrop-filter: blur(20px);
        backdrop-filter: blur(20px);
        border-right: 1px solid rgba(255, 255, 255, 0.1);
        padding: 20px;
        overflow-y: auto;
        position: sticky;
        top: 0;
        height: 100vh;
        box-shadow: var(--shadow-xl);
        transform: translateX(0);
      }

      .sidebar::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.1) 0%,
          rgba(255, 255, 255, 0.05) 100%
        );
        pointer-events: none;
      }

      .sidebar h1 {
        font-size: 1.5rem;
        margin-bottom: 30px;
        text-align: center;
        border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        padding-bottom: 15px;
      }

      .nav-section {
        margin-bottom: 25px;
      }

      .nav-section h3 {
        color: rgba(255, 255, 255, 0.9);
        font-size: 0.875rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 12px;
        padding: 0 16px;
        position: relative;
        z-index: 10;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      }

      .nav-section h3::after {
        content: "";
        position: absolute;
        bottom: -4px;
        left: 16px;
        right: 16px;
        height: 2px;
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0.6) 0%,
          rgba(255, 255, 255, 0.2) 50%,
          rgba(255, 255, 255, 0.6) 100%
        );
        border-radius: 1px;
      }

      .nav-item {
        display: block;
        padding: 14px 16px;
        color: rgba(255, 255, 255, 0.9);
        text-decoration: none;
        border-radius: var(--border-radius);
        margin-bottom: 6px;
        transition: var(--transition);
        cursor: pointer;
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(255, 255, 255, 0.05);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        position: relative;
        z-index: 10;
        font-weight: 500;
        overflow: hidden;
        width: 100%;
        text-align: left;
        font-size: 0.9rem;
      }

      .nav-item::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        transition: left 0.6s;
      }

      .nav-item:hover {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.2) 0%,
          rgba(255, 255, 255, 0.1) 100%
        );
        color: white;
        transform: translateX(6px);
        border-color: rgba(255, 255, 255, 0.3);
        box-shadow: var(--shadow-lg);
      }

      .nav-item:hover::before {
        left: 100%;
      }

      .nav-item.active {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.25) 0%,
          rgba(255, 255, 255, 0.15) 100%
        );
        color: white;
        box-shadow: var(--shadow-xl);
        border-color: rgba(255, 255, 255, 0.4);
        transform: translateX(4px);
        font-weight: 600;
      }

      .nav-item.active::after {
        content: "";
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 4px;
        height: 60%;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.8) 0%,
          rgba(255, 255, 255, 0.4) 100%
        );
        border-radius: 0 2px 2px 0;
      }

      .nav-item .badge {
        background-color: var(--accent-color);
        color: white;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 0.75rem;
        margin-left: auto;
        display: inline-block;
      }

      /* Toolbar */
      .toolbar {
        display: flex;
        gap: 12px;
        margin-bottom: 20px;
        padding: 16px;
        background: rgba(255, 255, 255, 0.15);
        border-radius: var(--border-radius-lg);
        -webkit-backdrop-filter: blur(20px);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: var(--shadow-lg);
        position: relative;
        z-index: 10;
      }

      .toolbar::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.2) 0%,
          rgba(255, 255, 255, 0.1) 100%
        );
        border-radius: var(--border-radius-lg);
        pointer-events: none;
      }

      .toolbar-btn {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 6px;
        padding: 12px 8px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.2) 0%,
          rgba(255, 255, 255, 0.1) 100%
        );
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: var(--border-radius);
        color: white;
        text-decoration: none;
        font-size: 0.75rem;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        position: relative;
        overflow: hidden;
        box-shadow: var(--shadow-sm);
      }

      .toolbar-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.5s;
      }

      .toolbar-btn:hover {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.3) 0%,
          rgba(255, 255, 255, 0.2) 100%
        );
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
        border-color: rgba(255, 255, 255, 0.4);
      }

      .toolbar-btn:hover::before {
        left: 100%;
      }

      .toolbar-btn:active {
        transform: translateY(0);
        box-shadow: var(--shadow-sm);
      }

      .toolbar-btn svg {
        width: 18px;
        height: 18px;
        filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
      }

      /* Main Content */
      .main-content {
        padding: 30px;
        overflow-y: auto;
        background: linear-gradient(
          135deg,
          var(--surface-color) 0%,
          rgba(255, 255, 255, 0.95) 100%
        );
        position: relative;
        min-height: 100vh;
      }

      .main-content::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 20% 80%,
            rgba(229, 57, 53, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(229, 57, 53, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 40%,
            rgba(229, 57, 53, 0.02) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: 0;
      }

      .main-content > * {
        position: relative;
        z-index: 1;
      }

      .content-header {
        margin-bottom: 30px;
        padding: 30px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.9) 0%,
          rgba(255, 255, 255, 0.7) 100%
        );
        border-radius: var(--border-radius-lg);
        box-shadow: var(--shadow-lg);
        border: 1px solid rgba(255, 255, 255, 0.3);
        -webkit-backdrop-filter: blur(20px);
        backdrop-filter: blur(20px);
        position: relative;
        overflow: hidden;
      }

      .content-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--primary-color) 0%,
          var(--primary-light) 50%,
          var(--primary-color) 100%
        );
      }

      .content-header h1 {
        color: var(--primary-color);
        margin: 0;
        font-size: 2.5rem;
        font-weight: 700;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        background: linear-gradient(
          135deg,
          var(--primary-color) 0%,
          var(--primary-dark) 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .content-header p {
        color: var(--text-secondary);
        font-size: 1.1rem;
      }

      .loading {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 200px;
        font-size: 1.2rem;
        color: var(--text-secondary);
      }

      .spinner {
        border: 3px solid var(--border-color);
        border-top: 3px solid var(--primary-color);
        border-radius: 50%;
        width: 30px;
        height: 30px;
        animation: spin 1s linear infinite;
        margin-right: 15px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .error {
        background-color: #f8d7da;
        color: #721c24;
        padding: 20px;
        border-radius: 8px;
        border: 1px solid #f5c6cb;
        margin: 20px 0;
      }

      /* Markdown Content Styles */
      .markdown-content {
        max-width: none;
        background: rgba(255, 255, 255, 0.6);
        border-radius: var(--border-radius-lg);
        padding: 40px;
        box-shadow: var(--shadow-lg);
        border: 1px solid rgba(255, 255, 255, 0.3);
        -webkit-backdrop-filter: blur(20px);
        backdrop-filter: blur(20px);
        margin-bottom: 30px;
      }

      .markdown-content h1 {
        color: var(--primary-color);
        font-size: 2.2rem;
        margin: 30px 0 20px 0;
        padding: 20px 0 15px 0;
        border-bottom: 3px solid transparent;
        background: linear-gradient(
            90deg,
            var(--primary-color) 0%,
            var(--primary-light) 100%
          )
          bottom / 100% 3px no-repeat;
        position: relative;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .markdown-content h1::before {
        content: "";
        position: absolute;
        left: 0;
        bottom: -3px;
        width: 60px;
        height: 3px;
        background: linear-gradient(
          90deg,
          var(--primary-color) 0%,
          var(--primary-light) 100%
        );
        border-radius: 2px;
      }

      .markdown-content h2 {
        color: var(--secondary-color);
        font-size: 1.8rem;
        margin: 25px 0 15px 0;
        padding: 15px 20px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.8) 0%,
          rgba(255, 255, 255, 0.6) 100%
        );
        border-radius: var(--border-radius);
        border-left: 4px solid var(--secondary-color);
        box-shadow: var(--shadow-sm);
        position: relative;
        overflow: hidden;
      }

      .markdown-content h2::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: linear-gradient(
          180deg,
          var(--secondary-color) 0%,
          var(--secondary-light) 100%
        );
      }

      .markdown-content h3 {
        color: var(--accent-color);
        font-size: 1.4rem;
        margin: 20px 0 10px 0;
        padding: 10px 15px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.7) 0%,
          rgba(255, 255, 255, 0.5) 100%
        );
        border-radius: var(--border-radius-sm);
        border-left: 3px solid var(--accent-color);
        box-shadow: var(--shadow-sm);
      }

      .markdown-content h4 {
        color: var(--text-primary);
        font-size: 1.2rem;
        margin: 15px 0 8px 0;
        font-weight: 600;
      }

      .markdown-content p {
        margin-bottom: 15px;
        line-height: 1.7;
      }

      .markdown-content ul,
      .markdown-content ol {
        margin: 15px 0;
        padding-left: 30px;
      }

      .markdown-content li {
        margin-bottom: 8px;
        line-height: 1.6;
      }

      .markdown-content blockquote {
        border-left: 4px solid var(--primary-color);
        padding: 20px 25px;
        margin: 25px 0;
        background: linear-gradient(
          135deg,
          rgba(229, 57, 53, 0.05) 0%,
          rgba(229, 57, 53, 0.02) 100%
        );
        border-radius: var(--border-radius);
        font-style: italic;
        box-shadow: var(--shadow-sm);
        border: 1px solid rgba(229, 57, 53, 0.1);
        position: relative;
        overflow: hidden;
      }

      .markdown-content blockquote::before {
        content: '"';
        position: absolute;
        top: 10px;
        right: 20px;
        font-size: 3rem;
        color: var(--primary-color);
        opacity: 0.2;
        font-family: serif;
      }

      .markdown-content table {
        width: 100%;
        border-collapse: collapse;
        margin: 25px 0;
        box-shadow: var(--shadow-lg);
        border-radius: var(--border-radius);
        overflow: hidden;
        background: rgba(255, 255, 255, 0.8);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
      }

      .markdown-content th,
      .markdown-content td {
        padding: 15px 20px;
        text-align: left;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      }

      .markdown-content th {
        background: linear-gradient(
          135deg,
          var(--primary-color) 0%,
          var(--primary-dark) 100%
        );
        color: white;
        font-weight: 600;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        position: relative;
      }

      .markdown-content th::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(
          90deg,
          var(--primary-light) 0%,
          var(--primary-color) 50%,
          var(--primary-light) 100%
        );
      }

      .markdown-content tr:hover {
        background: linear-gradient(
          135deg,
          rgba(229, 57, 53, 0.05) 0%,
          rgba(229, 57, 53, 0.02) 100%
        );
        transform: translateY(-1px);
        transition: var(--transition);
      }

      /* Code Blocks */
      .markdown-content pre {
        background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
        border-radius: var(--border-radius);
        padding: 25px;
        margin: 25px 0;
        overflow-x: auto;
        box-shadow: var(--shadow-lg);
        border: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
      }

      .markdown-content pre::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(
          90deg,
          var(--primary-color) 0%,
          var(--secondary-color) 50%,
          var(--accent-color) 100%
        );
        border-radius: var(--border-radius) var(--border-radius) 0 0;
      }

      .markdown-content code {
        font-family: "Fira Code", "Consolas", "Monaco", monospace;
        font-size: 0.9rem;
      }

      .markdown-content p code {
        background: linear-gradient(
          135deg,
          rgba(229, 57, 53, 0.1) 0%,
          rgba(229, 57, 53, 0.05) 100%
        );
        padding: 4px 8px;
        border-radius: var(--border-radius-sm);
        color: var(--primary-color);
        font-weight: 600;
        border: 1px solid rgba(229, 57, 53, 0.2);
        box-shadow: var(--shadow-sm);
      }

      /* Prism.js customizations - minimal to preserve 'coy' theme */
      pre[class*="language-"] {
        margin: 20px 0 !important;
        border-radius: 8px !important;
        box-shadow: var(--shadow) !important;
        /* Remove any background/color overrides to let 'coy' theme work */
      }
      /* Ensure 'coy' theme colors are preserved */
      pre[class*="language-"] code[class*="language-"] {
        background: inherit !important;
        color: inherit !important;
      }

      /* Search functionality */
      .search-container {
        margin-bottom: 20px;
        position: relative;
      }

      .search-input {
        width: 100%;
        padding: 12px 40px 12px 15px;
        border: 2px solid var(--border-color);
        border-radius: 25px;
        font-size: 1rem;
        transition: border-color 0.3s ease;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .search-icon {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-secondary);
      }

      /* Table of Contents */
      .toc {
        background-color: #f8f9fa;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
      }

      .toc h3 {
        color: var(--primary-color);
        margin-bottom: 15px;
      }

      .toc ul {
        list-style: none;
        padding-left: 0;
      }

      .toc li {
        margin-bottom: 8px;
      }

      .toc a {
        color: var(--accent-color);
        text-decoration: none;
        padding: 5px 10px;
        border-radius: 4px;
        transition: background-color 0.3s ease;
      }

      .toc a:hover {
        background-color: var(--border-color);
      }

      /* Mobile menu button */
      .mobile-menu-btn {
        display: none;
        position: fixed;
        top: 24px;
        left: 24px;
        z-index: 1001;
        background: linear-gradient(
          135deg,
          var(--primary-color) 0%,
          var(--primary-dark) 100%
        );
        color: white;
        border: none;
        border-radius: 50%;
        width: 56px;
        height: 56px;
        cursor: pointer;
        box-shadow: var(--shadow-xl);
        transition: var(--transition);
        -webkit-backdrop-filter: blur(20px);
        backdrop-filter: blur(20px);
        border: 2px solid rgba(255, 255, 255, 0.2);
      }

      .mobile-menu-btn::before {
        content: "";
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.3) 0%,
          rgba(255, 255, 255, 0.1) 100%
        );
        border-radius: 50%;
        z-index: -1;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .mobile-menu-btn:hover {
        background: linear-gradient(
          135deg,
          var(--primary-light) 0%,
          var(--primary-color) 100%
        );
        transform: scale(1.1) rotate(90deg);
        box-shadow: var(--shadow-xl), 0 0 20px rgba(229, 57, 53, 0.4);
      }

      .mobile-menu-btn:hover::before {
        opacity: 1;
      }

      .mobile-menu-btn:active {
        transform: scale(0.95);
      }

      .mobile-menu-btn svg {
        width: 24px;
        height: 24px;
        transition: var(--transition);
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .container {
          grid-template-columns: 1fr;
          grid-template-rows: auto 1fr;
        }

        .sidebar {
          position: fixed;
          top: 0;
          left: 0;
          height: 100vh;
          width: 280px;
          z-index: 1000;
          transform: translateX(-100%);
          transition: var(--transition);
          box-shadow: none;
        }

        .sidebar.active {
          transform: translateX(0);
          box-shadow: var(--shadow-xl), 20px 0 40px rgba(0, 0, 0, 0.3);
        }

        .mobile-menu-btn {
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .sidebar h1 {
          font-size: 1.3rem;
          margin-bottom: 20px;
        }

        .nav-section {
          margin-bottom: 15px;
        }

        .main-content {
          padding: 20px 15px;
          width: 100%;
        }

        .content-header h1 {
          font-size: 2rem;
        }

        /* Overlay for mobile sidebar */
        .sidebar-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          -webkit-backdrop-filter: blur(4px);
          backdrop-filter: blur(4px);
          z-index: 999;
          opacity: 0;
          visibility: hidden;
          transition: var(--transition);
        }

        .sidebar-overlay.active {
          opacity: 1;
          visibility: visible;
        }
      }

      @media (max-width: 480px) {
        .sidebar {
          width: 260px;
        }

        .mobile-menu-btn {
          width: 48px;
          height: 48px;
          top: 16px;
          left: 16px;
        }

        .mobile-menu-btn svg {
          width: 20px;
          height: 20px;
        }

        .main-content {
          padding: 16px;
        }

        .toolbar {
          flex-direction: column;
          gap: 8px;
        }

        .toolbar-btn {
          flex-direction: row;
          gap: 8px;
          justify-content: center;
        }
      }

      /* Print Styles */
      @media print {
        .sidebar {
          display: none;
        }

        .container {
          grid-template-columns: 1fr;
        }

        .main-content {
          padding: 0;
        }

        pre[class*="language-"] {
          background-color: #f8f9fa !important;
          color: #000 !important;
          border: 1px solid #ccc;
        }

        /* Preserve token colors in print */
        .token {
          color: #000 !important;
        }
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        -webkit-backdrop-filter: blur(8px);
        backdrop-filter: blur(8px);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .modal.show {
        opacity: 1;
      }

      .modal-content {
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.95) 0%,
          rgba(255, 255, 255, 0.9) 100%
        );
        -webkit-backdrop-filter: blur(20px);
        backdrop-filter: blur(20px);
        border-radius: var(--border-radius-lg);
        padding: 0;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: var(--shadow-xl), 0 25px 50px rgba(0, 0, 0, 0.25);
        border: 1px solid rgba(255, 255, 255, 0.3);
        transform: scale(0.9) translateY(20px);
        transition: transform 0.3s ease;
        position: relative;
      }

      .modal.show .modal-content {
        transform: scale(1) translateY(0);
      }

      .modal-header {
        background: linear-gradient(
          135deg,
          var(--primary-color) 0%,
          var(--primary-dark) 100%
        );
        color: white;
        padding: 20px 25px;
        border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
        overflow: hidden;
      }

      .modal-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          45deg,
          rgba(255, 255, 255, 0.1) 0%,
          transparent 100%
        );
        pointer-events: none;
      }

      .modal-header h3 {
        margin: 0;
        font-size: 1.3rem;
        font-weight: 600;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      }

      .modal-close {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        font-size: 1.5rem;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: var(--transition);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
      }

      .modal-close:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
      }

      .modal-content p {
        padding: 20px 25px 15px;
        margin: 0;
        color: var(--text-primary);
        font-size: 1rem;
      }

      .color-options {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 15px;
        padding: 0 25px 25px;
      }

      .color-option {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        cursor: pointer;
        border: 3px solid transparent;
        transition: var(--transition);
        position: relative;
        box-shadow: var(--shadow-md);
      }

      .color-option::before {
        content: "";
        position: absolute;
        top: -3px;
        left: -3px;
        right: -3px;
        bottom: -3px;
        border-radius: 50%;
        background: linear-gradient(
          45deg,
          rgba(255, 255, 255, 0.3),
          rgba(255, 255, 255, 0.1)
        );
        z-index: -1;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .color-option:hover {
        transform: scale(1.1);
        border-color: rgba(255, 255, 255, 0.5);
        box-shadow: var(--shadow-lg), 0 0 20px rgba(0, 0, 0, 0.2);
      }

      .color-option:hover::before {
        opacity: 1;
      }

      .color-option.selected {
        border-color: white;
        transform: scale(1.15);
        box-shadow: var(--shadow-xl), 0 0 25px rgba(0, 0, 0, 0.3);
      }

      .color-option.selected::after {
        content: "‚úì";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-weight: bold;
        font-size: 1.2rem;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      }

      /* Dark mode modal styles */
      body.dark-mode .modal-content {
        background: linear-gradient(
          135deg,
          rgba(45, 55, 72, 0.95) 0%,
          rgba(26, 32, 44, 0.9) 100%
        );
        border-color: rgba(255, 255, 255, 0.1);
      }

      body.dark-mode .modal-content p {
        color: var(--text-primary);
      }
    </style>
  </head>
  <body>
    <!-- Mobile menu button -->
    <button class="mobile-menu-btn" id="mobileMenuBtn">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
      </svg>
    </button>

    <!-- Sidebar overlay for mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="container">
      <!-- Sidebar Navigation -->
      <nav class="sidebar">
        <h1>üìö Interview Guide</h1>

        <div class="toolbar">
          <button
            class="toolbar-btn"
            id="printBtn"
            title="Print Current Content"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="6 9 6 2 18 2 18 9"></polyline>
              <path
                d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"
              ></path>
              <rect x="6" y="14" width="12" height="8"></rect>
            </svg>
            Print
          </button>
          <button class="toolbar-btn" id="pdfBtn" title="Export as PDF">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path
                d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
              ></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
              <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
            PDF
          </button>
          <button
            class="toolbar-btn"
            id="themeBtn"
            title="Toggle Dark/Light Theme"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
            Theme
          </button>
          <button class="toolbar-btn" id="colorBtn" title="Change Color Theme">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <circle cx="12" cy="12" r="4"></circle>
            </svg>
            Colors
          </button>
        </div>

        <div class="search-container">
          <input
            type="text"
            class="search-input"
            placeholder="Search topics..."
            id="searchInput"
          />
          <span class="search-icon">üîç</span>
        </div>

        <div class="nav-section">
          <h3>Frontend Technologies</h3>
          <button class="nav-item" data-file="angular/angular-questions.md">
            Angular 14 <span class="badge">100+</span>
          </button>
          <button
            class="nav-item"
            data-file="javascript/javascript-questions.md"
          >
            JavaScript <span class="badge">80+</span>
          </button>
          <button
            class="nav-item"
            data-file="typescript/typescript-questions.md"
          >
            TypeScript <span class="badge">70+</span>
          </button>
          <button class="nav-item" data-file="html/html-questions.md">
            HTML5 <span class="badge">50+</span>
          </button>
          <button class="nav-item" data-file="css/css-questions.md">
            CSS3 <span class="badge">60+</span>
          </button>
          <button class="nav-item" data-file="react/react-questions.md">
            React.js <span class="badge">45+</span>
          </button>
        </div>

        <div class="nav-section">
          <h3>State Management</h3>
          <button class="nav-item" data-file="ngrx/ngrx-questions.md">
            NgRx <span class="badge">40+</span>
          </button>
        </div>

        <div class="nav-section">
          <h3>Performance & Security</h3>
          <button
            class="nav-item"
            data-file="performance/performance-questions.md"
          >
            Performance <span class="badge">35+</span>
          </button>
          <button class="nav-item" data-file="security/security-questions.md">
            Security <span class="badge">45+</span>
          </button>
        </div>

        <div class="nav-section">
          <h3>Backend Technologies</h3>
          <button class="nav-item" data-file="nodejs/nodejs-questions.md">
            Node.js <span class="badge">60+</span>
          </button>
          <button class="nav-item" data-file="python/python-questions.md">
            Python & Django <span class="badge">55+</span>
          </button>
          <button class="nav-item" data-file="docker/docker-questions.md">
            Docker & DevOps <span class="badge">45+</span>
          </button>
          <button
            class="nav-item"
            data-file="kubernetes/kubernetes-questions.md"
          >
            Kubernetes <span class="badge">40+</span>
          </button>
          <button class="nav-item" data-file="aws/aws-questions.md">
            AWS Cloud <span class="badge">50+</span>
          </button>
          <button class="nav-item" data-file="database/database-questions.md">
            Database & SQL <span class="badge">65+</span>
          </button>
        </div>

        <div class="nav-section">
          <h3>Integration & Advanced</h3>
          <button
            class="nav-item"
            data-file="integration/angular14-integration-questions.md"
          >
            Angular 14 Integration <span class="badge">25+</span>
          </button>
          <button class="nav-item" data-file="vue/vue-questions.md">
            Vue.js <span class="badge">50+</span>
          </button>
        </div>
      </nav>

      <!-- Main Content Area -->
      <main class="main-content">
        <div class="content-header">
          <h1>Lead Developer Interview Guide</h1>
          <p>
            Comprehensive collection of interview questions covering Angular 14,
            JavaScript, HTML5, CSS3, NgRx, Performance, Security, and
            Integration patterns.
          </p>
        </div>

        <div id="contentArea">
          <div class="welcome-content">
            <h2>Welcome to the Interview Guide</h2>
            <p>
              Select a topic from the sidebar to begin exploring interview
              questions and answers.
            </p>

            <div class="toc">
              <h3>üìã Available Topics</h3>
              <ul>
                <li>
                  <strong>Angular 14:</strong> Components, Services, Routing,
                  Forms, and new features
                </li>
                <li>
                  <strong>JavaScript:</strong> ES6+, Async/Await, Closures,
                  Prototypes, and modern patterns
                </li>
                <li>
                  <strong>TypeScript:</strong> Type system, Generics,
                  Decorators, and advanced patterns
                </li>
                <li>
                  <strong>HTML5:</strong> Semantic elements, APIs, Forms, and
                  accessibility
                </li>
                <li>
                  <strong>CSS3:</strong> Flexbox, Grid, Animations, and
                  responsive design
                </li>
                <li>
                  <strong>NgRx:</strong> State management, Actions, Reducers,
                  Effects, and Selectors
                </li>
                <li>
                  <strong>Performance:</strong> Optimization techniques, Core
                  Web Vitals, and best practices
                </li>
                <li>
                  <strong>Security:</strong> OWASP Top 10, Authentication,
                  Authorization, and secure coding
                </li>
                <li>
                  <strong>Integration:</strong> Angular 14 features, Standalone
                  components, and advanced patterns
                </li>
              </ul>
            </div>

            <h3>üöÄ Features</h3>
            <ul>
              <li>
                ‚úÖ <strong>Syntax Highlighting:</strong> Code examples with
                proper highlighting
              </li>
              <li>
                ‚úÖ <strong>Responsive Design:</strong> Works on desktop, tablet,
                and mobile
              </li>
              <li>
                ‚úÖ <strong>Search Functionality:</strong> Find topics quickly
              </li>
              <li>‚úÖ <strong>Print Support:</strong> Print-friendly layouts</li>
              <li>
                ‚úÖ <strong>Modular Structure:</strong> Easy to add new topics
              </li>
              <li>
                ‚úÖ <strong>Progressive Loading:</strong> Fast initial load,
                content loaded on demand
              </li>
            </ul>

            <h3>üí° How to Use</h3>
            <ol>
              <li>Click on any topic in the sidebar to load questions</li>
              <li>Use the search box to find specific topics</li>
              <li>Print individual sections using the print button</li>
              <li>Toggle between light and dark themes</li>
              <li>Export content to PDF for offline reading</li>
            </ol>
          </div>
        </div>
      </main>
    </div>

    <!-- Mobile Menu Button -->
    <!-- Color Theme Modal -->
    <div class="modal" id="colorModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Choose Theme Color</h3>
          <button class="modal-close" id="closeColorModal">&times;</button>
        </div>
        <p>Select a primary color for the application theme:</p>
        <div class="color-options">
          <div
            class="color-option"
            style="background-color: #e53935"
            data-color="#e53935"
            title="Red"
          ></div>
          <div
            class="color-option"
            style="background-color: #1976d2"
            data-color="#1976d2"
            title="Blue"
          ></div>
          <div
            class="color-option"
            style="background-color: #43a047"
            data-color="#43a047"
            title="Green"
          ></div>
          <div
            class="color-option"
            style="background-color: #7b1fa2"
            data-color="#7b1fa2"
            title="Purple"
          ></div>
          <div
            class="color-option"
            style="background-color: #ff9800"
            data-color="#ff9800"
            title="Orange"
          ></div>
          <div
            class="color-option"
            style="background-color: #00acc1"
            data-color="#00acc1"
            title="Cyan"
          ></div>
          <div
            class="color-option"
            style="background-color: #5d4037"
            data-color="#5d4037"
            title="Brown"
          ></div>
          <div
            class="color-option"
            style="background-color: #546e7a"
            data-color="#546e7a"
            title="Blue Grey"
          ></div>
        </div>
      </div>
    </div>

    <!-- Prism.js Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>

    <!-- Main Application Script -->
    <script>
      class InterviewGuideApp {
        constructor() {
          this.currentFile = null;
          this.cache = new Map();
          this.searchIndex = new Map();
          this.isDarkTheme = false;
          this.currentColor = getComputedStyle(document.documentElement)
            .getPropertyValue("--primary-color")
            .trim();

          this.init();
        }

        init() {
          this.setupEventListeners();
          this.setupSearch();
          this.setupPWA();
          this.loadInitialContent();
        }

        setupEventListeners() {
          // Navigation items
          document.querySelectorAll(".nav-item[data-file]").forEach((item) => {
            item.addEventListener("click", (e) => {
              const file = e.target.closest(".nav-item").dataset.file;
              this.loadContent(file);

              // Close sidebar on mobile after selection
              if (window.innerWidth <= 768) {
                const sidebar = document.querySelector(".sidebar");
                const overlay = document.getElementById("sidebarOverlay");

                sidebar.classList.remove("active");
                overlay.classList.remove("active");
              }
            });
          });

          // Toolbar buttons
          document
            .getElementById("printBtn")
            .addEventListener("click", () => this.printContent());
          document
            .getElementById("pdfBtn")
            .addEventListener("click", () => this.exportToPDF());
          document
            .getElementById("themeBtn")
            .addEventListener("click", () => this.toggleTheme());
          document
            .getElementById("colorBtn")
            .addEventListener("click", () => this.openColorModal());

          // Mobile menu button
          document
            .getElementById("mobileMenuBtn")
            .addEventListener("click", () => {
              const sidebar = document.querySelector(".sidebar");
              const overlay = document.getElementById("sidebarOverlay");

              sidebar.classList.toggle("active");
              overlay.classList.toggle("active");
            });

          // Sidebar overlay click to close
          document
            .getElementById("sidebarOverlay")
            .addEventListener("click", () => {
              const sidebar = document.querySelector(".sidebar");
              const overlay = document.getElementById("sidebarOverlay");

              sidebar.classList.remove("active");
              overlay.classList.remove("active");
            });

          // Close sidebar on escape key
          document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") {
              const sidebar = document.querySelector(".sidebar");
              const overlay = document.getElementById("sidebarOverlay");

              if (sidebar.classList.contains("active")) {
                sidebar.classList.remove("active");
                overlay.classList.remove("active");
              }
            }
          });

          // Color modal
          document
            .getElementById("closeColorModal")
            .addEventListener("click", () => {
              this.closeColorModal();
            });

          // Color options
          document.querySelectorAll(".color-option").forEach((option) => {
            option.addEventListener("click", () => {
              const color = option.getAttribute("data-color");
              this.changeThemeColor(color);

              // Update selected state
              document.querySelectorAll(".color-option").forEach((opt) => {
                opt.classList.remove("selected");
              });
              option.classList.add("selected");

              // Close modal
              this.closeColorModal();
            });
          });

          // Keyboard shortcuts
          document.addEventListener("keydown", (e) => {
            if (e.ctrlKey || e.metaKey) {
              switch (e.key) {
                case "p":
                  e.preventDefault();
                  this.printContent();
                  break;
                case "f":
                  e.preventDefault();
                  document.getElementById("searchInput").focus();
                  break;
              }
            }

            // Close modal on escape
            if (e.key === "Escape") {
              this.closeColorModal();
            }
          });

          // Close modal when clicking outside
          window.addEventListener("click", (e) => {
            const modal = document.getElementById("colorModal");
            if (e.target === modal) {
              this.closeColorModal();
            }
          });
        }

        setupSearch() {
          const searchInput = document.getElementById("searchInput");
          let searchTimeout;

          searchInput.addEventListener("input", (e) => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
              this.performSearch(e.target.value);
            }, 300);
          });
        }

        setupPWA() {
          // Register service worker for PWA functionality
          if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
              navigator.serviceWorker
                .register("/service-worker.js")
                .catch((error) => {
                  console.log("Service Worker registration failed:", error);
                });
            });
          }
        }

        async loadContent(filePath) {
          try {
            this.showLoading();
            this.setActiveNavItem(filePath);

            let content;
            if (this.cache.has(filePath)) {
              // Add a small delay to show loading animation even for cached content
              await new Promise((resolve) => setTimeout(resolve, 300));
              content = this.cache.get(filePath);
            } else {
              const response = await fetch(filePath);
              if (!response.ok) {
                throw new Error(
                  `Failed to load ${filePath}: ${response.statusText}`
                );
              }
              content = await response.text();
              this.cache.set(filePath, content);
            }

            this.renderMarkdown(content);
            this.currentFile = filePath;
            this.buildSearchIndex(content, filePath);
          } catch (error) {
            this.showError(`Error loading content: ${error.message}`);
          }
        }

        renderMarkdown(content) {
          const contentArea = document.getElementById("contentArea");

          // Configure marked options
          marked.setOptions({
            highlight: function (code, lang) {
              if (Prism.languages[lang]) {
                return Prism.highlight(code, Prism.languages[lang], lang);
              }
              return code;
            },
            breaks: true,
            gfm: true,
          });

          // Parse markdown
          const html = marked.parse(content);
          contentArea.innerHTML = `<div class="markdown-content">${html}</div>`;

          // Re-run Prism highlighting
          Prism.highlightAll();

          // Add line numbers to code blocks
          document
            .querySelectorAll('pre[class*="language-"]')
            .forEach((pre) => {
              pre.classList.add("line-numbers");
            });

          // Smooth scroll to top
          contentArea.scrollTop = 0;

          // Add copy buttons to code blocks
          this.addCopyButtons();

          // Generate table of contents
          this.generateTOC();
        }

        addCopyButtons() {
          document
            .querySelectorAll('pre[class*="language-"]')
            .forEach((pre) => {
              if (!pre.querySelector(".copy-button")) {
                const button = document.createElement("button");
                button.className = "copy-button";
                button.textContent = "Copy";
                button.style.cssText = `
                  position: absolute;
                  top: 10px;
                  right: 10px;
                  background: var(--primary-color);
                  color: white;
                  border: none;
                  padding: 5px 10px;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 0.8rem;
                `;

                button.addEventListener("click", () => {
                  const code = pre.querySelector("code").textContent;
                  navigator.clipboard.writeText(code).then(() => {
                    button.textContent = "Copied!";
                    setTimeout(() => {
                      button.textContent = "Copy";
                    }, 2000);
                  });
                });

                pre.style.position = "relative";
                pre.appendChild(button);
              }
            });
        }

        generateTOC() {
          const headings = document.querySelectorAll(
            ".markdown-content h2, .markdown-content h3"
          );
          if (headings.length === 0) return;

          const toc = document.createElement("div");
          toc.className = "toc";
          toc.innerHTML = "<h3>üìë Table of Contents</h3><ul></ul>";

          const ul = toc.querySelector("ul");

          headings.forEach((heading, index) => {
            const id = `heading-${index}`;
            heading.id = id;

            const li = document.createElement("li");
            const a = document.createElement("a");
            a.href = `#${id}`;
            a.textContent = heading.textContent;
            a.style.paddingLeft = heading.tagName === "H3" ? "20px" : "0";

            a.addEventListener("click", (e) => {
              e.preventDefault();
              heading.scrollIntoView({ behavior: "smooth" });
            });

            li.appendChild(a);
            ul.appendChild(li);
          });

          const firstHeading = document.querySelector(
            ".markdown-content h1, .markdown-content h2"
          );
          if (firstHeading) {
            firstHeading.parentNode.insertBefore(toc, firstHeading.nextSibling);
          }
        }

        buildSearchIndex(content, filePath) {
          const words = content.toLowerCase().match(/\b\w+\b/g) || [];
          words.forEach((word) => {
            if (!this.searchIndex.has(word)) {
              this.searchIndex.set(word, new Set());
            }
            this.searchIndex.get(word).add(filePath);
          });
        }

        performSearch(query) {
          if (!query.trim()) {
            this.clearSearchHighlight();
            return;
          }

          const searchTerms = query.toLowerCase().split(/\s+/);
          const navItems = document.querySelectorAll(".nav-item[data-file]");

          navItems.forEach((item) => {
            const file = item.dataset.file;
            const content = this.cache.get(file) || "";
            const matches = searchTerms.every((term) =>
              content.toLowerCase().includes(term)
            );

            item.style.display = matches ? "block" : "none";
          });

          // Highlight search terms in current content
          this.highlightSearchTerms(searchTerms);
        }

        highlightSearchTerms(terms) {
          const contentArea = document.querySelector(".markdown-content");
          if (!contentArea) return;

          this.clearSearchHighlight();

          terms.forEach((term) => {
            if (term.length < 2) return;

            const regex = new RegExp(`(${term})`, "gi");
            this.highlightText(contentArea, regex);
          });
        }

        highlightText(element, regex) {
          const walker = document.createTreeWalker(
            element,
            NodeFilter.SHOW_TEXT,
            null,
            false
          );

          const textNodes = [];
          let node;
          while ((node = walker.nextNode())) {
            textNodes.push(node);
          }

          textNodes.forEach((textNode) => {
            const parent = textNode.parentNode;
            if (parent.tagName === "SCRIPT" || parent.tagName === "STYLE")
              return;

            const text = textNode.textContent;
            if (regex.test(text)) {
              const highlightedHTML = text.replace(
                regex,
                '<mark class="search-highlight">$1</mark>'
              );
              const wrapper = document.createElement("span");
              wrapper.innerHTML = highlightedHTML;
              parent.replaceChild(wrapper, textNode);
            }
          });
        }

        clearSearchHighlight() {
          document.querySelectorAll(".search-highlight").forEach((mark) => {
            const parent = mark.parentNode;
            parent.replaceChild(
              document.createTextNode(mark.textContent),
              mark
            );
            parent.normalize();
          });
        }

        setActiveNavItem(filePath) {
          document.querySelectorAll(".nav-item").forEach((item) => {
            item.classList.remove("active");
          });

          const activeItem = document.querySelector(
            `[data-file="${filePath}"]`
          );
          if (activeItem) {
            activeItem.classList.add("active");
          }
        }

        showLoading() {
          const contentArea = document.getElementById("contentArea");
          contentArea.innerHTML = `
            <div class="loading">
              <div class="spinner"></div>
              <div class="loading-text">Loading content...</div>
            </div>
          `;
        }

        showError(message) {
          const contentArea = document.getElementById("contentArea");
          contentArea.innerHTML = `
            <div class="error">
              <h3>‚ùå Error</h3>
              <p>${message}</p>
              <p>Please check that the file exists and try again.</p>
            </div>
          `;
        }

        printContent() {
          window.print();
        }

        exportToPDF() {
          const { jsPDF } = window.jspdf;
          const contentArea = document.querySelector(".markdown-content");

          if (!contentArea) {
            alert("No content to export!");
            return;
          }

          // Show loading indicator
          const loadingEl = document.createElement("div");
          loadingEl.className = "loading";
          loadingEl.innerHTML = `
            <div class="spinner"></div>
            <div class="loading-text">Generating PDF...</div>
          `;
          document.body.appendChild(loadingEl);

          // Use setTimeout to allow the loading indicator to render
          setTimeout(() => {
            try {
              // Create PDF with proper A4 dimensions
              const doc = new jsPDF({
                orientation: "portrait",
                unit: "mm",
                format: "a4",
                compress: true,
              });

              // A4 dimensions in mm
              const pageWidth = 210;
              const pageHeight = 297;
              const margin = 20;
              const contentWidth = pageWidth - margin * 2;
              const contentHeight = pageHeight - margin * 2;

              // Get current file name for the PDF title
              const fileName = this.currentFile
                ? this.currentFile.split("/").pop().replace(".md", "")
                : "interview-guide";

              // Add title
              doc.setFontSize(20);
              doc.setFont("helvetica", "bold");
              doc.text(
                fileName.replace(/-/g, " ").toUpperCase(),
                margin,
                margin + 10
              );

              // Add a line under title
              doc.setLineWidth(0.5);
              doc.line(margin, margin + 15, pageWidth - margin, margin + 15);

              let yPosition = margin + 25;

              // Extract and format content
              const elements = contentArea.children;

              for (let i = 0; i < elements.length; i++) {
                const element = elements[i];
                const tagName = element.tagName.toLowerCase();
                let text = element.textContent.trim();

                if (!text) continue;

                // Check if we need a new page
                if (yPosition > pageHeight - margin - 20) {
                  doc.addPage();
                  yPosition = margin + 10;
                }

                // Handle different element types
                switch (tagName) {
                  case "h1":
                    doc.setFontSize(18);
                    doc.setFont("helvetica", "bold");
                    doc.text(text, margin, yPosition);
                    yPosition += 12;
                    break;

                  case "h2":
                    doc.setFontSize(16);
                    doc.setFont("helvetica", "bold");
                    doc.text(text, margin, yPosition);
                    yPosition += 10;
                    break;

                  case "h3":
                    doc.setFontSize(14);
                    doc.setFont("helvetica", "bold");
                    doc.text(text, margin, yPosition);
                    yPosition += 8;
                    break;

                  case "p":
                    doc.setFontSize(11);
                    doc.setFont("helvetica", "normal");
                    const lines = doc.splitTextToSize(text, contentWidth);

                    for (let line of lines) {
                      if (yPosition > pageHeight - margin - 10) {
                        doc.addPage();
                        yPosition = margin + 10;
                      }
                      doc.text(line, margin, yPosition);
                      yPosition += 6;
                    }
                    yPosition += 3;
                    break;

                  case "pre":
                    doc.setFontSize(9);
                    doc.setFont("courier", "normal");
                    doc.setFillColor(245, 245, 245);

                    const codeLines = text.split("\n");
                    const codeHeight = codeLines.length * 4 + 6;

                    if (yPosition + codeHeight > pageHeight - margin) {
                      doc.addPage();
                      yPosition = margin + 10;
                    }

                    // Draw code background
                    doc.rect(
                      margin,
                      yPosition - 3,
                      contentWidth,
                      codeHeight,
                      "F"
                    );

                    for (let codeLine of codeLines) {
                      doc.text(codeLine, margin + 2, yPosition);
                      yPosition += 4;
                    }
                    yPosition += 6;
                    break;

                  case "ul":
                  case "ol":
                    doc.setFontSize(11);
                    doc.setFont("helvetica", "normal");
                    const listItems = element.querySelectorAll("li");

                    listItems.forEach((li, index) => {
                      if (yPosition > pageHeight - margin - 10) {
                        doc.addPage();
                        yPosition = margin + 10;
                      }

                      const bullet = tagName === "ul" ? "‚Ä¢ " : `${index + 1}. `;
                      const itemText = bullet + li.textContent.trim();
                      const itemLines = doc.splitTextToSize(
                        itemText,
                        contentWidth - 5
                      );

                      for (let line of itemLines) {
                        doc.text(line, margin + 5, yPosition);
                        yPosition += 6;
                      }
                    });
                    yPosition += 3;
                    break;

                  case "blockquote":
                    doc.setFontSize(11);
                    doc.setFont("helvetica", "italic");
                    doc.setDrawColor(200, 200, 200);
                    doc.setLineWidth(2);

                    const quoteLines = doc.splitTextToSize(
                      text,
                      contentWidth - 10
                    );
                    const quoteHeight = quoteLines.length * 6;

                    if (yPosition + quoteHeight > pageHeight - margin) {
                      doc.addPage();
                      yPosition = margin + 10;
                    }

                    // Draw left border for blockquote
                    doc.line(
                      margin,
                      yPosition - 2,
                      margin,
                      yPosition + quoteHeight
                    );

                    for (let line of quoteLines) {
                      doc.text(line, margin + 8, yPosition);
                      yPosition += 6;
                    }
                    yPosition += 5;
                    break;

                  default:
                    if (text.length > 0) {
                      doc.setFontSize(11);
                      doc.setFont("helvetica", "normal");
                      const defaultLines = doc.splitTextToSize(
                        text,
                        contentWidth
                      );

                      for (let line of defaultLines) {
                        if (yPosition > pageHeight - margin - 10) {
                          doc.addPage();
                          yPosition = margin + 10;
                        }
                        doc.text(line, margin, yPosition);
                        yPosition += 6;
                      }
                      yPosition += 3;
                    }
                    break;
                }
              }

              // Add footer with page numbers
              const pageCount = doc.internal.getNumberOfPages();
              for (let i = 1; i <= pageCount; i++) {
                doc.setPage(i);
                doc.setFontSize(8);
                doc.setFont("helvetica", "normal");
                doc.text(
                  `Page ${i} of ${pageCount}`,
                  pageWidth - margin - 20,
                  pageHeight - 10
                );
              }

              // Save the PDF
              doc.save(`${fileName}.pdf`);
            } catch (error) {
              console.error("PDF generation error:", error);
              alert("Error generating PDF. Please try again.");
            } finally {
              // Remove loading indicator
              if (document.body.contains(loadingEl)) {
                document.body.removeChild(loadingEl);
              }
            }
          }, 100);
        }

        toggleTheme() {
          document.body.classList.toggle("dark-theme");
          this.isDarkTheme = document.body.classList.contains("dark-theme");
          localStorage.setItem("darkTheme", this.isDarkTheme);

          // Switch Prism theme
          this.switchPrismTheme(this.isDarkTheme);

          // Update theme button icon
          const themeBtn = document.getElementById("themeBtn");
          if (this.isDarkTheme) {
            themeBtn.innerHTML = `
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              </svg>
              Theme
            `;
          } else {
            themeBtn.innerHTML = `
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
              </svg>
              Theme
            `;
          }
        }

        openColorModal() {
          const modal = document.getElementById("colorModal");
          modal.style.display = "flex";

          // Trigger animation after display is set
          setTimeout(() => {
            modal.classList.add("show");
          }, 10);

          // Mark current color as selected
          document.querySelectorAll(".color-option").forEach((option) => {
            const color = option.getAttribute("data-color");
            if (color === this.currentColor) {
              option.classList.add("selected");
            } else {
              option.classList.remove("selected");
            }
          });
        }

        closeColorModal() {
          const modal = document.getElementById("colorModal");
          modal.classList.remove("show");

          // Hide modal after animation completes
          setTimeout(() => {
            modal.style.display = "none";
          }, 300);
        }

        switchPrismTheme(isDark) {
          // Remove existing Prism theme
          const existingTheme = document.querySelector(
            'link[href*="prism"][href*="theme"]'
          );
          if (existingTheme) {
            existingTheme.remove();
          }

          // Add new theme
          const newTheme = document.createElement("link");
          newTheme.rel = "stylesheet";
          newTheme.href = isDark
            ? "https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css"
            : "https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-coy.min.css";

          document.head.appendChild(newTheme);

          // Re-highlight all code blocks after theme change
          setTimeout(() => {
            if (window.Prism) {
              window.Prism.highlightAll();
            }
          }, 100);
        }

        changeThemeColor(color) {
          document.documentElement.style.setProperty("--primary-color", color);
          document.documentElement.style.setProperty(
            "--secondary-color",
            color
          );

          // Store the color preference
          localStorage.setItem("themeColor", color);
          this.currentColor = color;
        }

        loadInitialContent() {
          // Load theme preferences
          if (localStorage.getItem("darkTheme") === "true") {
            this.toggleTheme();
          }

          // Load color preference
          const savedColor = localStorage.getItem("themeColor");
          if (savedColor) {
            this.changeThemeColor(savedColor);
          }

          // Load Angular questions by default
          this.loadContent("angular/angular-questions.md");
        }
      }

      // Initialize app when DOM is loaded
      document.addEventListener("DOMContentLoaded", () => {
        // Initialize the app
        window.app = new InterviewGuideApp();
      });

      // Initialize app when DOM is loaded
      document.addEventListener("DOMContentLoaded", () => {
        // Load theme preference
        if (localStorage.getItem("darkTheme") === "true") {
          document.body.classList.add("dark-theme");
        }

        // Initialize the app
        window.app = new InterviewGuideApp();
      });

      // Add dark theme styles
      const darkThemeStyles = `
            .dark-theme {
                --background-color: #1a1a1a;
                --surface-color: #2d2d2d;
                --text-primary: #ffffff;
                --text-secondary: #b0b0b0;
                --border-color: #404040;
            }
            
            .dark-theme .markdown-content blockquote {
                background-color: #3a3a3a;
            }
            
            .dark-theme .toc {
                background-color: #3a3a3a;
                border-color: #404040;
            }
            
            .dark-theme .search-input {
                background-color: #3a3a3a;
                color: #ffffff;
            }
            
            .dark-theme .markdown-content p code {
                background-color: #404040;
                color: #ff6b6b;
            }
        `;

      const styleSheet = document.createElement("style");
      styleSheet.textContent = darkThemeStyles;
      document.head.appendChild(styleSheet);
    </script>
  </body>
</html>
